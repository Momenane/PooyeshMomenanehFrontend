<main class="archive ">
    <div class=" d-flex flex-column container-fluid">
        <h1 class="so-title">
            لیست سوابق دریافت خدمت
        </h1>
        <div class="d-flex flex-wrap ">
            <!-- <button class="btn btn-orange text-white so-btn-sm ml-2" ui-sref="panel.ticketing.new">
                <i class="fas s-plus ml-1"></i>
                تیکت جدید
            </button> -->
            <sd-input-container class="text-right ml-2">
                <select class="so-input-sm" ng-model="self.warrantiesType" ng-change="self.getTickets()"
                    ng-model-options="{ debounce: 500 }">
                    <option ng-repeat="item in self.warrantiesTypeEnum" value="{{item.value}}" ng-bind="item.key">
                    </option>
                </select>
            </sd-input-container>
            <sd-input-container class="text-right ml-2">
                <select class="so-input-sm" ng-model="self.status" ng-change="self.getTickets()"
                    ng-model-options="{ debounce: 500 }">
                    <option ng-repeat="item in self.statusEnum" value="{{item.value}}" ng-bind="item.key"></option>
                </select>
            </sd-input-container>
            <sd-input-container class="material text-right flex-grow-1">
                <sd-icon>
                    <i class="fas s-search"></i>
                </sd-icon>
                <input class="w-100 bg-l-stone" placeholder="جستجو کنید" type="text" ng-minlength="2" ng-maxlength="70"
                    ng-model="self.search" ng-change="self.getTickets()" ng-model-options="{ debounce: 500 }" />
            </sd-input-container>

        </div>
    </div>
    <section cg-busy="self.promiseLoading">
        <ol ng-if="self.warranties.totalRecord > 0" class="collection collection-container">
            <!-- The first list item is the header of the table -->
            <li class="item item-container item-container-header container-fluid bg-l-stone text-blue py-2">
                <div class="attribute font-weight-bold" data-name="ردیف"></div>
                <div class="attribute font-weight-bold d-flex justify-content-center" data-name="اطلاعات پرونده">اطلاعات
                    پرونده</div>
                <div class="attribute font-weight-bold" data-name="نوع پرونده">نوع پرونده</div>
                <div class="attribute font-weight-bold" data-name="وضعیت پرونده">وضعیت پرونده</div>
                <div class="attribute ticketing-pagination">
                    <div class="ticketing-pagination-text ml-3 mb-0 so-subheading-2">
                        <span class="">
                            {{self.warranties.paginationInfo.toRecord}}-{{self.warranties.paginationInfo.fromRecord}}
                        </span>
                        <span class="text-l-gray">
                            از
                            {{self.warranties.totalRecord}}
                        </span>
                    </div>
                    <span class="ticketing-pagination-icon ml-1" ng-disabled="self.pageIndex == 1"
                        ng-click="self.previousPage()">
                        <i class="fas s-angle-right"></i>
                    </span>
                    <span class="ticketing-pagination-icon ml-1" ng-disabled="self.pageIndex == self.finalPage"
                        ng-click="self.nextPage()">
                        <i class="fas s-angle-left"></i>
                    </span>
                </div>
            </li>
            <li class="container-fluid">
                <div class="item item-container item-container-body open"
                    ng-repeat="warranty in self.warranties.content" ui-sref="panel.archive.details({id:warranty.id})">
                    <div class="attribute mb-0  status" ng-class="{
                        'bg-green status':warranty.state == 82,
                        'bg-red status':warranty.state == 100
                    }" data-name="row">
                        <!-- <span class="circle"></span> -->
                    </div>
                    <div class="attribute" data-name="اطلاعات پرونده">
                        <div class="d-flex flex-column w-100 pr-3">
                            <div class="so-title mb-2">
                                <span>دریافت ضمانت نامه</span>

                            </div>
                            <div class="text-blue">
                                <span>شماره پرونده:</span>
                                <span ng-bind="warranty.warrantyNumber"></span>
                            </div>
                        </div>

                    </div>
                    <div class="attribute" data-name="نوع پرونده" ng-bind="warranty.warrantyType | warrantyTypeFilter">
                    </div>
                    <div class="attribute" data-name="وضعیت پرونده">
                        <span class=" h-100 mb-0 d-flex align-items-center" ng-class="{
                                'text-green status':warranty.state == 82,
                                'text-red status':warranty.state == 100
                            }" ng-bind="warranty.stateTitle">
                        </span>
                    </div>
                    <div class="attribute d-flex flex-column" data-name="وضعیت پرونده">
                        <div ng-bind="warranty.dateTime | jalaliDateFilter : 'jYYYY/jM/jD'"></div>
                        <div ng-bind="warranty.dateTime | dateFromNow"></div>
                    </div>
                </div>

            </li>

        </ol>

        <div class="container-fluid" ng-if="self.warranties.totalRecord == 0">
            <span class="bg-stone p-5 d-flex justify-content-center align-items-center">
                موردی یافت نشد

            </span>
        </div>
    </section>
</main>