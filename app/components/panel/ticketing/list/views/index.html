<main class="notifs">
    <div class="container-fluid d-flex flex-column">
        <h1 class="so-title">
            لیست تیکت ها
        </h1>
        <div class="py-3">
            <div class="d-flex flex-column flex-wrap text-n-gray">
                <div class="so-title mb-1">کاربر گرامی؛</div>
                <div class="so-subheading-2  mb-4">
                    لطفا مشکلات خود را از طریق تیکت اعلام فرمائید تا کارشناسان مربوطه در اسرع وقت نسبت به رفع آن اقدام
                    نمایند.<br />
                    همچنین در صورت لزوم می توانید با شماره <span class="text-green">0174 461 0903</span> تماس حاصل
                    فرمائید.
                </div>
            </div>
        </div>
        <div class="d-flex flex-wrap">
            <button class="btn btn-orange text-white so-btn-sm ml-2" ui-sref="panel.ticketing.new">
                <i class="fas s-plus ml-1"></i>
                تیکت جدید
            </button>
            <sd-input-container class="text-right ml-2">
                <select class="so-input-sm" ng-model="self.ticketType" ng-change="self.getTickets()"
                    ng-model-options="{ debounce: 500 }">
                    <option ng-repeat="item in self.ticketTypeEnum" value="{{item.value}}" ng-bind="item.key"></option>
                </select>
            </sd-input-container>
            <sd-input-container class="text-right ml-2">
                <select class="so-input-sm" ng-model="self.priority" ng-change="self.getTickets()"
                    ng-model-options="{ debounce: 500 }">
                    <option ng-repeat="item in self.priorityEnum" value="{{item.value}}" ng-bind="item.key"></option>
                </select>
            </sd-input-container>
            <sd-input-container class="material text-right flex-grow-1">
                <sd-icon>
                    <i class="fas s-search"></i>
                </sd-icon>
                <input class="w-100 bg-l-stone" placeholder="در نوع تیکت ها جستجو کنید" type="text" ng-minlength="2"
                    ng-maxlength="70" ng-model="self.search" ng-change="self.getTickets()"
                    ng-model-options="{ debounce: 500 }" />
            </sd-input-container>

        </div>
    </div>
    <section cg-busy="self.promiseLoading">
        <ol ng-if="self.tickets.content.length > 0" class="collection collection-container">
            <!-- The first list item is the header of the table -->
            <li class="item item-container item-container-header container-fluid bg-l-stone py-2">
                <div class="attribute" data-name="ردیف"></div>
                <div class="attribute" data-name="شماره تیکت">شماره تیکت</div>
                <div class="attribute" data-name="موضوع تیکت">موضوع تیکت</div>
                <div class="attribute" data-name="عنوان تیکت">عنوان تیکت</div>
                <div class="attribute" data-name="فوریت">فوریت</div>
                <div class="attribute" data-name="تاریخ ارسال">تاریخ ارسال</div>
                <div class="attribute ticketing-pagination">
                    <div class="ticketing-pagination-text ml-3 mb-0 so-subheading-2">
                        <span class="text-blue">
                            {{self.tickets.paginationInfo.toRecord}}-{{self.tickets.paginationInfo.fromRecord}}
                        </span>
                        <span class="text-l-gray">
                            از
                            {{self.tickets.totalRecord}}
                        </span>
                    </div>
                    <span class="ticketing-pagination-icon ml-1" ng-disabled="self.pageIndex == 1"
                        ng-click="self.previousPage()">
                        <i class="fas s-angle-right"></i>
                    </span>
                    <span class="ticketing-pagination-icon ml-1" ng-disabled="self.pageIndex == self.finalPage"
                        ng-click="self.nextPage()">
                        <i class="fas s-angle-left"></i>
                    </span>
                </div>
            </li>
            <li class="container-fluid">
                <div class="item item-container item-container-body open" ng-class="{
                    'open':ticket.state == 0,
                    'closed':ticket.state == 1
                }" ui-sref="panel.ticketing.details({id:ticket.id})" ng-repeat="ticket in self.tickets.content">
                    <div class="attribute bg-l-silver so-title mb-0" data-name="row">
                        {{(self.page - 1 )* self.pageSize + ($index +1)}}</div>
                    <div class="attribute" data-name="شماره تیکت" ng-bind="ticket.code"></div>
                    <div class="attribute" data-name="موضوع تیکت" ng-bind="ticket.ticketTypeDescription"></div>
                    <div class="attribute" data-name="عنوان تیکت" ng-bind="ticket.title"></div>
                    <div class="attribute" data-name="فوریت">
                        <span class="btn so-btn-xs h-100 text-white mb-0 priority-badge" ng-class="{
                            'bg-green':ticket.priority == 0 ,
                            'bg-orange':ticket.priority == 1 ,
                            'bg-red':ticket.priority == 2
                        }" ng-bind="ticket.priorityDescription">
                        </span>
                    </div>
                    <div class="attribute" data-name="تاریخ ارسال"
                        ng-bind="ticket.createDateTime | jalaliDateFilter : 'jYYYY/jM/jD'"></div>
                    <div class="attribute" data-name="وضعیت">
                        <span class="btn so-btn-xs h-100 mb-0 priority-badge" ng-class="{
                            'bg-white text-black':ticket.state == 0,
                            'bg-d-gray text-white':ticket.state == 1
                        }" ng-bind="ticket.stateDescription">
                        </span>
                    </div>
                </div>

            </li>

        </ol>
        <div class="container-fluid" ng-if="self.tickets.content.length == 0">
            <span class="bg-stone p-5 d-flex justify-content-center align-items-center">
                موردی یافت نشد

            </span>
        </div>
    </section>
</main>